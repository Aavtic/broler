syntax = "proto3";
package broler;

option go_package = "github.com/aavtic/broler/rpc/broler_grpc";


service Broler {
  rpc PageInfo(PagesInfoReq) returns (stream Pages) {}
  rpc ClientRequests(stream ClientReq) returns (stream ServerResponse) {}
}

message PagesInfoReq {}

// {
//   "aavtic.dev": {
//     is_end: false
//     "styles.css": {is_end: true},
//     "projects/ass_parser": {is_end: false...}
//   },
// }

message Paths {
  bool is_end = 1;
  string is_processed = 2;
  map<string, Paths> paths = 3;
}

message Pages {
  map<string, Paths> root = 1;
}

message ClientReq {
  string request = 1;
}

message ServerResponse {
  string response = 1;
}
